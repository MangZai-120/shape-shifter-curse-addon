{
    "type": "origins:multiple",
    "charging_state": {
        "type": "origins:resource",
        "min": 0,
        "max": 1,
        "start_value": 0,
        "hud_render": {
            "should_render": false
        }
    },
    "charge_timer": {
        "type": "origins:resource",
        "min": 0,
        "max": 50,
        "start_value": 0,
        "hud_render": {
            "should_render": false
        }
    },
    "cooldown_timer": {
        "type": "origins:resource",
        "min": 0,
        "max": 600,
        "start_value": 0,
        "hud_render": {
            "should_render": false
        }
    },
    "cooldown_tick": {
        "type": "origins:action_over_time",
        "interval": 1,
        "entity_action": {
            "type": "origins:change_resource",
            "resource": "my_addon:form_allay_sp_purify_cooldown_timer",
            "operation": "add",
            "change": -1
        },
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_cooldown_timer",
            "comparison": ">",
            "compare_to": 0
        }
    },
    "key_activation": {
        "type": "origins:active_self",
        "key": {
            "key": "key.ssc_addon.sp_primary"
        },
        "cooldown": 10,
        "entity_action": {
            "type": "origins:if_else",
            "condition": {
                "type": "origins:resource",
                "resource": "my_addon:form_allay_sp_purify_charging_state",
                "comparison": "==",
                "compare_to": 0
            },
            "if_action": {
                "type": "origins:and",
                "actions": [
                    {
                        "type": "origins:change_resource",
                        "resource": "my_addon:form_allay_sp_purify_charging_state",
                        "operation": "set",
                        "change": 1
                    },
                    {
                        "type": "origins:change_resource",
                        "resource": "my_addon:form_allay_sp_purify_charge_timer",
                        "operation": "set",
                        "change": 0
                    },
                    {
                        "type": "origins:apply_effect",
                        "effect": {
                            "effect": "minecraft:slowness",
                            "duration": 60,
                            "amplifier": 3,
                            "is_ambient": true,
                            "show_particles": false,
                            "show_icon": false
                        }
                    },
                    {
                        "type": "origins:execute_command",
                        "command": "playsound block.beacon.activate master @s ~ ~ ~ 0.5 1.5"
                    }
                ]
            },
            "else_action": {
                "type": "origins:and",
                "actions": [
                    {
                        "type": "origins:change_resource",
                        "resource": "my_addon:form_allay_sp_purify_charging_state",
                        "operation": "set",
                        "change": 0
                    },
                    {
                        "type": "origins:change_resource",
                        "resource": "my_addon:form_allay_sp_purify_charge_timer",
                        "operation": "set",
                        "change": 0
                    },
                    {
                        "type": "origins:clear_effect",
                        "effect": "minecraft:slowness"
                    },
                    {
                        "type": "origins:play_sound",
                        "sound": "block.beacon.deactivate",
                        "volume": 0.5,
                        "pitch": 1.5
                    }
                ]
            }
        },
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_cooldown_timer",
            "comparison": "==",
            "compare_to": 0
        }
    },
    "charging_tick": {
        "type": "origins:action_over_time",
        "interval": 1,
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_charging_state",
            "comparison": "==",
            "compare_to": 1
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_allay_sp_purify_charge_timer",
                    "operation": "add",
                    "change": 1
                },
                {
                    "type": "origins:if_else",
                    "condition": {
                        "type": "origins:resource",
                        "resource": "my_addon:form_allay_sp_purify_charge_timer",
                        "comparison": ">=",
                        "compare_to": 50
                    },
                    "if_action": {
                        "type": "origins:and",
                        "actions": [
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_allay_sp_purify_charging_state",
                                "operation": "set",
                                "change": 0
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_allay_sp_purify_charge_timer",
                                "operation": "set",
                                "change": 0
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_allay_sp_purify_cooldown_timer",
                                "operation": "set",
                                "change": 600
                            },
                            {
                                "type": "origins:change_resource",
                                "resource": "my_addon:form_allay_sp_mana_cooldown_resource",
                                "operation": "set",
                                "change": 70
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "effect clear @s"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "effect give @s ssc_addon:purified 1 0 true"
                            },
                            {
                                "type": "origins:area_of_effect",
                                "radius": 20.0,
                                "bientity_action": {
                                    "type": "origins:target_action",
                                    "action": {
                                        "type": "origins:and",
                                        "actions": [
                                            {
                                                "type": "origins:execute_command",
                                                "command": "effect clear @s"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "power resource set @s my_addon:form_axolotl_sp_vortex_impact vortex_state 0"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "power resource set @s my_addon:form_familiar_fox_red_blue_fire_ring toggle_state 0"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "power resource set @s my_addon:form_allay_sp_purify charging_state 0"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "power resource set @s my_addon:form_allay_sp_purify charge_timer 0"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "effect give @s ssc_addon:purified 1 0 true"
                                            },
                                            {
                                                "type": "origins:execute_command",
                                                "command": "particle minecraft:dust 0.6 0.85 1.0 1.0 ~ ~1 ~ 0.5 0.8 0.5 1.0 15 force @a"
                                            }
                                        ]
                                    }
                                },
                                "bientity_condition": {
                                    "type": "origins:target_condition",
                                    "condition": {
                                        "type": "origins:living"
                                    }
                                }
                            },
                            {
                                "type": "origins:play_sound",
                                "sound": "block.fire.extinguish",
                                "volume": 2.0,
                                "pitch": 0.6
                            },
                            {
                                "type": "origins:play_sound",
                                "sound": "block.amethyst_cluster.break",
                                "volume": 2.0,
                                "pitch": 1.2
                            },
                            {
                                "type": "shape-shifter-curse:spawn_particles_in_circle",
                                "particle": "minecraft:end_rod",
                                "count": 1,
                                "speed": 0.02,
                                "force": true,
                                "spread": {
                                    "x": 0.3,
                                    "y": 0.3,
                                    "z": 0.3
                                },
                                "radius": 20.0,
                                "sample_count": 64
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "particle minecraft:dust 0.6 0.85 1.0 1.5 ~ ~1 ~ 7.0 7.0 7.0 0.01 60 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~6 ~ run particle minecraft:end_rod ~ ~ ~ 14.0 0.3 14.0 0.015 20 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-4 ~ run particle minecraft:end_rod ~ ~ ~ 14.0 0.3 14.0 0.015 20 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~11 ~ run particle minecraft:end_rod ~ ~ ~ 11.0 0.3 11.0 0.015 16 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-9 ~ run particle minecraft:end_rod ~ ~ ~ 11.0 0.3 11.0 0.015 16 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~15 ~ run particle minecraft:end_rod ~ ~ ~ 5.0 0.3 5.0 0.015 8 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-13 ~ run particle minecraft:end_rod ~ ~ ~ 5.0 0.3 5.0 0.015 8 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~6 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 14.0 0.4 14.0 0.005 15 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-4 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 14.0 0.4 14.0 0.005 15 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~11 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 11.0 0.4 11.0 0.005 10 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-9 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 11.0 0.4 11.0 0.005 10 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~15 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 5.0 0.4 5.0 0.005 5 force @a"
                            },
                            {
                                "type": "origins:execute_command",
                                "command": "execute positioned ~ ~-13 ~ run particle minecraft:dust 0.6 0.85 1.0 1.2 ~ ~ ~ 5.0 0.4 5.0 0.005 5 force @a"
                            }
                        ]
                    }
                }
            ]
        }
    },
    "charging_slowness": {
        "type": "origins:action_over_time",
        "interval": 20,
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_charging_state",
            "comparison": "==",
            "compare_to": 1
        },
        "entity_action": {
            "type": "origins:apply_effect",
            "effect": {
                "effect": "minecraft:slowness",
                "duration": 30,
                "amplifier": 3,
                "is_ambient": true,
                "show_particles": false,
                "show_icon": false
            }
        }
    },
    "charging_particles_sphere": {
        "type": "origins:action_over_time",
        "interval": 5,
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_charging_state",
            "comparison": "==",
            "compare_to": 1
        },
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "shape-shifter-curse:spawn_particles_in_circle",
                    "particle": "minecraft:dust 0.6 0.85 1.0 1.0",
                    "count": 1,
                    "speed": 0.0,
                    "force": true,
                    "spread": {
                        "x": 0.2,
                        "y": 0.2,
                        "z": 0.2
                    },
                    "radius": 20.0,
                    "sample_count": 24
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~6 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 14.0 0.3 14.0 0.003 8 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~-4 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 14.0 0.3 14.0 0.003 8 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~11 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 11.0 0.3 11.0 0.003 6 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~-9 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 11.0 0.3 11.0 0.003 6 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~15 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 5.0 0.3 5.0 0.003 3 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "execute positioned ~ ~-13 ~ run particle minecraft:dust 0.6 0.85 1.0 0.8 ~ ~ ~ 5.0 0.3 5.0 0.003 3 force @a"
                },
                {
                    "type": "origins:execute_command",
                    "command": "particle minecraft:dust 0.6 0.85 1.0 0.6 ~ ~1 ~ 3.0 2.0 3.0 0.003 4 force @a"
                }
            ]
        }
    },
    "interrupt_on_damage": {
        "type": "origins:action_when_damage_taken",
        "entity_action": {
            "type": "origins:and",
            "actions": [
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_allay_sp_purify_charging_state",
                    "operation": "set",
                    "change": 0
                },
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_allay_sp_purify_charge_timer",
                    "operation": "set",
                    "change": 0
                },
                {
                    "type": "origins:change_resource",
                    "resource": "my_addon:form_allay_sp_purify_cooldown_timer",
                    "operation": "set",
                    "change": 100
                },
                {
                    "type": "origins:clear_effect",
                    "effect": "minecraft:slowness"
                },
                {
                    "type": "origins:play_sound",
                    "sound": "block.beacon.deactivate",
                    "volume": 0.5,
                    "pitch": 1.5
                }
            ]
        },
        "condition": {
            "type": "origins:resource",
            "resource": "my_addon:form_allay_sp_purify_charging_state",
            "comparison": "==",
            "compare_to": 1
        }
    },
    "name": "Purification",
    "description": "Charge for 2.5 seconds to purify all entities in a 20 block radius, clearing all potion effects and interrupting other SP form abilities. Taking damage during charging will interrupt the charge and trigger a 5s cooldown."
}
